<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>Trackbit - Open_source fitbit mapping</title>
  <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.4/dist/leaflet.css" integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA==" crossorigin=""/>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
  <script src="https://unpkg.com/leaflet@1.3.4/dist/leaflet.js" integrity="sha512-nMMmRyTVoLYqjP9hrbed9S+FzjZHW5gY1TWCHA5ckwXZBadntCNs8kEqAWdrb9O7rxbCaA4lKTIWjDXZxflOcA==" crossorigin=""></script>
  <style>
    #map{ width: 800px; height: 600px; }
  </style>
</head>
<nav class="navbar navbar-default">
  <div class="container-fluid">
    <div class="navbar-header">
      <a class="navbar-brand" href="#">Trackbit</a>
    </div>
  </div>
</nav>
<body>
  <div class="container-fluid">
    <div class="row">
      <div class="col-4" style="height:600px; overflow-y:scroll">
        <table id="selection" class="table table-dark table-hover table-striped">
          <thead>
            <tr>
              <th>ID</th>
              <th>Date</th>
            </tr>
          </thead>
        </table>
      </div>
      <div class="col-6" id="map">
      </div>
    </div>
    <div class="container-fluid" style="height:300px; overflow-y:scroll">
      <table class="table table-dark  table-hover table-striped">
        <thead>
          <tr>
            <th>Distance</th>
            <th></th>
            <th>Test 3</th>
          </tr>
        </thead>
      </table>
    </div>
  </div>
  <script type="text/javascript">
    $(document).ready(function(){

    });
  </script>
    <script>
        //url location
        var coordinateURL = "http://localhost:8080/polyline"
        var latlngs = new Array();
        $.ajax({
            url: coordinateURL,
            async: false,
            dataType: 'json',
            success: function(data){
                latlngs.push(data.coordinates);
            }
        });
        // initialize the map at base coordinates in array
        var map = L.map('map').setView(latlngs[0][0], 13);
        L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);
        console.log(latlngs.length);
        // iterate through coordinates list of nested double arrays
        for(var i = 0; i < latlngs.length; i++){
            var latlng = latlngs[i];
            var polyline = L.polyline(latlng, {color: 'red'}).addTo(map);
        }
        // raster tile layer from openstreetmap{x}{y} params are location data passed from initial map load
        //var polyline = L.polyline(latlngs, {color: 'red'}).addTo(map);
        //map.fitBounds(polyline.getBounds());
        // load a tile layer
    </script>
</body>
</html>